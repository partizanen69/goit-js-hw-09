{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["const submitBtn = document.querySelector('button[type=\"submit\"]');\n\nconst form = document.querySelector('form');\n\nlet inProgress = 0;\n\nsubmitBtn.addEventListener('click', async e => {\n  e.preventDefault();\n\n  if (inProgress > 0) {\n    return;\n  }\n\n  let delay = form.elements.delay.value;\n  let step = form.elements.step.value;\n  let amount = form.elements.amount.value;\n\n  if (!delay || !step || !amount) {\n    alert('Please fill in all values');\n    return;\n  }\n\n  delay = Number(delay);\n  step = Number(step);\n  amount = Number(amount);\n\n  if (delay <= 0) {\n    alert('Delay must be greater than zero');\n    return;\n  }\n\n  if (step <= 0) {\n    alert('Step must be greater than zero');\n    return;\n  }\n\n  if (amount <= 0) {\n    alert('Amount must be greater than zero');\n    return;\n  }\n\n  inProgress = amount;\n  submitBtn.disabled = true;\n  form.elements.delay.value = '';\n  form.elements.step.value = '';\n  form.elements.amount.value = '';\n\n  for (let i = 0; i < amount; i++) {\n    createPromise(i + 1, delay + step * i)\n      .then(({ position, delay }) => {\n        console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n      })\n      .finally(() => {\n        inProgress -= 1;\n        if (inProgress === 0) {\n          submitBtn.disabled = false;\n        }\n      });\n  }\n});\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n"],"names":["submitBtn","form","inProgress","e","delay","step","amount","i","createPromise","position","shouldResolve","resolve","reject"],"mappings":"wFAAA,MAAMA,EAAY,SAAS,cAAc,uBAAuB,EAE1DC,EAAO,SAAS,cAAc,MAAM,EAE1C,IAAIC,EAAa,EAEjBF,EAAU,iBAAiB,QAAS,MAAMG,GAAK,CAG7C,GAFAA,EAAE,eAAc,EAEZD,EAAa,EACf,OAGF,IAAIE,EAAQH,EAAK,SAAS,MAAM,MAC5BI,EAAOJ,EAAK,SAAS,KAAK,MAC1BK,EAASL,EAAK,SAAS,OAAO,MAElC,GAAI,CAACG,GAAS,CAACC,GAAQ,CAACC,EAAQ,CAC9B,MAAM,2BAA2B,EACjC,MACD,CAMD,GAJAF,EAAQ,OAAOA,CAAK,EACpBC,EAAO,OAAOA,CAAI,EAClBC,EAAS,OAAOA,CAAM,EAElBF,GAAS,EAAG,CACd,MAAM,iCAAiC,EACvC,MACD,CAED,GAAIC,GAAQ,EAAG,CACb,MAAM,gCAAgC,EACtC,MACD,CAED,GAAIC,GAAU,EAAG,CACf,MAAM,kCAAkC,EACxC,MACD,CAEDJ,EAAaI,EACbN,EAAU,SAAW,GACrBC,EAAK,SAAS,MAAM,MAAQ,GAC5BA,EAAK,SAAS,KAAK,MAAQ,GAC3BA,EAAK,SAAS,OAAO,MAAQ,GAE7B,QAASM,EAAI,EAAGA,EAAID,EAAQC,IAC1BC,EAAcD,EAAI,EAAGH,EAAQC,EAAOE,CAAC,EAClC,KAAK,CAAC,CAAE,SAAAE,EAAU,MAAAL,KAAY,CAC7B,QAAQ,IAAI,uBAAuBK,QAAeL,KAAS,CACnE,CAAO,EACA,MAAM,CAAC,CAAE,SAAAK,EAAU,MAAAL,KAAY,CAC9B,QAAQ,IAAI,sBAAsBK,QAAeL,KAAS,CAClE,CAAO,EACA,QAAQ,IAAM,CACbF,GAAc,EACVA,IAAe,IACjBF,EAAU,SAAW,GAE/B,CAAO,CAEP,CAAC,EAED,SAASQ,EAAcC,EAAUL,EAAO,CACtC,MAAMM,EAAgB,KAAK,OAAM,EAAK,GACtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,WAAW,IAAM,CACXF,EACFC,EAAQ,CAAE,SAAAF,EAAU,MAAAL,CAAK,CAAE,EAE3BQ,EAAO,CAAE,SAAAH,EAAU,MAAAL,CAAK,CAAE,CAE7B,EAAEA,CAAK,CACZ,CAAG,CACH"}